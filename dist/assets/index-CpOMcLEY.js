const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Login-CkoNn6vP.js","assets/vendor-DdeEpjzh.js","assets/index-ID-G45V4.js","assets/element-DkRX-ly5.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/Login-CDtvn-kZ.css","assets/Register-sFqEDnyR.js","assets/Register-B2mCdAz4.css","assets/AdminLayout-X-a5M9s3.js","assets/ThemeToggle-CD-XhNPt.js","assets/ThemeToggle-Dwhe2EcR.css","assets/AdminLayout-DYTS_e7Z.css","assets/AdminHome-DlDE1u9U.js","assets/echarts-CSf_FMkx.js","assets/AdminHome-BOxP92zj.css","assets/UserManagement-D-73LNuD.js","assets/UserManagement-UD0iPn-1.css","assets/EmployeeManagement-DOsGy_b8.js","assets/EmployeeManagement-D_-BE_Zs.css","assets/DepartmentManagement-DakWweW9.js","assets/DepartmentManagement-BIk-uwEj.css","assets/ServiceManagement-B-mdHhpz.js","assets/ServiceManagement-D7axAMlc.css","assets/AIRecords-B0fw6GAT.js","assets/AIRecords-CH-VLVSK.css","assets/SystemSettings-DWghzkMC.js","assets/SystemSettings-CRC3RGe4.css","assets/UserLayout-CW2Js8R_.js","assets/UserLayout-CuBRVyjE.css","assets/UserHome-Bzh7hbOC.js","assets/UserHome-gV0C6Rt8.css","assets/AIConsult-BB7ofTeh.js","assets/AIConsult-i15HCfCY.css","assets/HealthRecord-CSTQxZBu.js","assets/HealthRecord-BABL3ZoL.css","assets/ServiceAppointment-0UBp7eNg.js","assets/ServiceAppointment-DyXhvtXi.css","assets/MallHome-6wuFoc7o.js","assets/MallHome-D-OL1zjV.css","assets/ProductDetail-D_CPmRQx.js","assets/ProductDetail-CMk2TeY4.css","assets/ShoppingCart-B4-YzsQN.js","assets/ShoppingCart-B1hzQBvq.css","assets/Checkout-mcsjBxEI.js","assets/Checkout-DYuiUwad.css","assets/NotFound-lU_E99L_.js","assets/NotFound-BdiBA5ln.css"])))=>i.map(i=>d[i]);
import{ax as _,h as L,U as S,z as y,R as A,al as T,A as P,ay as k,az as O,au as R,aA as w}from"./vendor-DdeEpjzh.js";import{i as D}from"./element-DkRX-ly5.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))m(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&m(i)}).observe(document,{childList:!0,subtree:!0});function o(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function m(r){if(r.ep)return;r.ep=!0;const s=o(r);fetch(r.href,s)}})();const g=_("theme",{state:()=>({isDark:!1,themeConfig:{transitionDuration:"0.3s",transitionTimingFunction:"ease"}}),getters:{currentTheme:e=>e.isDark?"dark":"light",getCssVars:()=>{const e={},t=window.getComputedStyle(document.documentElement);return Array.from(t).forEach(o=>{o.startsWith("--")&&(e[o]=t.getPropertyValue(o).trim())}),e}},actions:{initTheme(){const e=localStorage.getItem("theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches,o=e?e==="dark":t;this.applyTheme(o),this.setupMediaQueryListener()},applyTheme(e){this.isDark=e,e?document.documentElement.setAttribute("data-theme","dark"):document.documentElement.removeAttribute("data-theme"),localStorage.setItem("theme",e?"dark":"light"),window.dispatchEvent(new CustomEvent("themeChanged",{detail:{isDark:e}}))},toggleTheme(){this.applyTheme(!this.isDark)},setupMediaQueryListener(){const e=window.matchMedia("(prefers-color-scheme: dark)"),t=o=>{localStorage.getItem("theme")||this.applyTheme(o.matches)};e.addEventListener("change",t),this._mediaQueryListener=t},updateConfig(e){this.themeConfig={...this.themeConfig,...e}},setCssVariable(e,t){document.documentElement.style.setProperty(e,t)},resetTheme(){localStorage.removeItem("theme");const e=window.matchMedia("(prefers-color-scheme: dark)").matches;this.applyTheme(e)},$dispose(){this._mediaQueryListener&&window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",this._mediaQueryListener)}}});window.toggleTheme||(window.toggleTheme=()=>{g().toggleTheme()});const V={class:"app-container"},C={__name:"App",setup(e){const t=g();return L(()=>{t.initTheme()}),S(()=>{t.$dispose()}),(o,m)=>{const r=T("router-view");return P(),y("div",V,[A(r)])}}},M="modulepreload",U=function(e){return"/"+e},p={},n=function(t,o,m){let r=Promise.resolve();if(o&&o.length>0){let E=function(a){return Promise.all(a.map(u=>Promise.resolve(u).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),c=i?.nonce||i?.getAttribute("nonce");r=E(o.map(a=>{if(a=U(a),a in p)return;p[a]=!0;const u=a.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${d}`))return;const l=document.createElement("link");if(l.rel=u?"stylesheet":M,u||(l.as="script"),l.crossOrigin="",l.href=a,c&&l.setAttribute("nonce",c),document.head.appendChild(l),u)return new Promise((I,v)=>{l.addEventListener("load",I),l.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${a}`)))})}))}function s(i){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=i,window.dispatchEvent(c),!c.defaultPrevented)throw i}return r.then(i=>{for(const c of i||[])c.status==="rejected"&&s(c.reason);return t().catch(s)})},b=_("user",{state:()=>{const e=localStorage.getItem("token")||"";return console.log("Store初始化 - 从localStorage读取token:",e?"存在":"不存在"),{userInfo:null,token:e,role:localStorage.getItem("role")||"",isLoggedIn:!!e}},actions:{login(e){console.log("Store登录方法调用 - 接收到的用户数据:",e),this.userInfo={id:e.id,name:e.name,username:e.username},this.token=e.token,console.log("Store中设置token:",e.token),this.role=e.role===0?"admin":"user",this.isLoggedIn=!0,console.log("Store状态更新完成 - isLoggedIn:",this.isLoggedIn,"role:",this.role),localStorage.setItem("token",e.token),console.log("Store中token已存储到localStorage"),localStorage.setItem("role",this.role),localStorage.setItem("userInfo",JSON.stringify(this.userInfo))},logout(){this.userInfo=null,this.token="",this.role="",this.isLoggedIn=!1,localStorage.removeItem("token"),localStorage.removeItem("role"),localStorage.removeItem("userInfo")},restoreUser(){const e=localStorage.getItem("token"),t=localStorage.getItem("role"),o=localStorage.getItem("userInfo");e&&t&&o&&(this.token=e,this.role=t,this.userInfo=JSON.parse(o),this.isLoggedIn=!0)}},getters:{getUserName:e=>e.userInfo?.name||"用户",isAdmin:e=>e.role==="admin",isUser:e=>e.role==="user"}}),N=[{path:"/login",name:"Login",component:()=>n(()=>import("./Login-CkoNn6vP.js"),__vite__mapDeps([0,1,2,3,4,5])),meta:{requiresAuth:!1}},{path:"/register",name:"Register",component:()=>n(()=>import("./Register-sFqEDnyR.js"),__vite__mapDeps([6,1,2,3,4,7])),meta:{requiresAuth:!1}},{path:"/admin",name:"AdminLayout",component:()=>n(()=>import("./AdminLayout-X-a5M9s3.js"),__vite__mapDeps([8,1,9,4,10,3,11])),meta:{requiresAuth:!0,role:"admin"},children:[{path:"home",name:"AdminHome",component:()=>n(()=>import("./AdminHome-DlDE1u9U.js"),__vite__mapDeps([12,3,1,2,13,4,14]))},{path:"users",name:"UserManagement",component:()=>n(()=>import("./UserManagement-D-73LNuD.js"),__vite__mapDeps([15,2,3,1,4,16]))},{path:"employees",name:"EmployeeManagement",component:()=>n(()=>import("./EmployeeManagement-DOsGy_b8.js"),__vite__mapDeps([17,2,3,1,4,18]))},{path:"departments",name:"DepartmentManagement",component:()=>n(()=>import("./DepartmentManagement-DakWweW9.js"),__vite__mapDeps([19,1,2,3,4,20]))},{path:"services",name:"ServiceManagement",component:()=>n(()=>import("./ServiceManagement-B-mdHhpz.js"),__vite__mapDeps([21,2,3,1,4,22]))},{path:"ai-records",name:"AIRecords",component:()=>n(()=>import("./AIRecords-B0fw6GAT.js"),__vite__mapDeps([23,2,3,1,4,24]))},{path:"system",name:"SystemSettings",component:()=>n(()=>import("./SystemSettings-DWghzkMC.js"),__vite__mapDeps([25,2,3,1,4,26]))}]},{path:"/user",name:"UserLayout",component:()=>n(()=>import("./UserLayout-CW2Js8R_.js"),__vite__mapDeps([27,1,9,4,10,3,28])),meta:{requiresAuth:!0,role:"user"},children:[{path:"home",name:"UserHome",component:()=>n(()=>import("./UserHome-Bzh7hbOC.js"),__vite__mapDeps([29,1,3,2,4,30]))},{path:"ai-consult",name:"AIConsult",component:()=>n(()=>import("./AIConsult-BB7ofTeh.js"),__vite__mapDeps([31,1,3,2,4,32]))},{path:"health-record",name:"HealthRecord",component:()=>n(()=>import("./HealthRecord-CSTQxZBu.js"),__vite__mapDeps([33,1,4,34]))},{path:"service-appointment",name:"ServiceAppointment",component:()=>n(()=>import("./ServiceAppointment-0UBp7eNg.js"),__vite__mapDeps([35,1,4,3,36]))},{path:"mall",name:"MallHome",component:()=>n(()=>import("./MallHome-6wuFoc7o.js"),__vite__mapDeps([37,1,3,4,38]))},{path:"mall/product/:productId",name:"ProductDetail",component:()=>n(()=>import("./ProductDetail-D_CPmRQx.js"),__vite__mapDeps([39,1,3,4,40]))},{path:"mall/cart",name:"ShoppingCart",component:()=>n(()=>import("./ShoppingCart-B4-YzsQN.js"),__vite__mapDeps([41,1,4,3,42]))},{path:"mall/checkout",name:"Checkout",component:()=>n(()=>import("./Checkout-mcsjBxEI.js"),__vite__mapDeps([43,1,3,4,44]))}]},{path:"/",redirect:"/login"},{path:"/:pathMatch(.*)*",name:"NotFound",component:()=>n(()=>import("./NotFound-lU_E99L_.js"),__vite__mapDeps([45,1,4,46]))}],f=k({history:O(),routes:N});f.beforeEach((e,t,o)=>{const m=b();if(e.meta.requiresAuth){if(!m.isLoggedIn){console.log("路由守卫: 需要登录但未登录，重定向到登录页"),o("/login");return}if(e.meta.role&&e.meta.role!==m.role){console.log(`路由守卫: 角色权限不足 - 当前角色: ${m.role}, 需要角色: ${e.meta.role}`),m.isAdmin?o("/admin/home"):o("/user/home");return}}o()});const h=R(C);h.use(w());h.use(f);h.use(D);h.mount("#app");export{g as a,b as u};
