const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Login-DZkOI0G3.js","assets/vendor-DdeEpjzh.js","assets/index-ID-G45V4.js","assets/element-DkRX-ly5.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/Login--Sp8sjJ7.css","assets/Register-sFqEDnyR.js","assets/Register-B2mCdAz4.css","assets/AdminLayout-D1ALm_c1.js","assets/ThemeToggle-CqJrz4R2.js","assets/ThemeToggle-BdA9Z-3C.css","assets/AdminLayout-DtTRzsfO.css","assets/AdminHome-DlDE1u9U.js","assets/echarts-CSf_FMkx.js","assets/AdminHome-BOxP92zj.css","assets/UserManagement-D-73LNuD.js","assets/UserManagement-UD0iPn-1.css","assets/EmployeeManagement-DOsGy_b8.js","assets/EmployeeManagement-D_-BE_Zs.css","assets/DepartmentManagement-DakWweW9.js","assets/DepartmentManagement-BIk-uwEj.css","assets/ServiceManagement-B-mdHhpz.js","assets/ServiceManagement-D7axAMlc.css","assets/AIRecords-B0fw6GAT.js","assets/AIRecords-CH-VLVSK.css","assets/SystemSettings-DWghzkMC.js","assets/SystemSettings-CRC3RGe4.css","assets/UserLayout-DMzXewrO.js","assets/UserLayout-BnIOcAWE.css","assets/UserHome-DtSa8zFN.js","assets/UserHome-CK5yyCkA.css","assets/AIConsult-CaxPc8jB.js","assets/AIConsult-i15HCfCY.css","assets/HealthRecord-yzzaX521.js","assets/HealthRecord-DSWFh7gc.css","assets/ServiceAppointment-0UBp7eNg.js","assets/ServiceAppointment-DyXhvtXi.css","assets/MallHome-B3DPqLtX.js","assets/MallHome-D6mcdjBy.css","assets/ProductDetail-D_CPmRQx.js","assets/ProductDetail-CMk2TeY4.css","assets/ShoppingCart-B4-YzsQN.js","assets/ShoppingCart-B1hzQBvq.css","assets/Checkout-mcsjBxEI.js","assets/Checkout-DYuiUwad.css","assets/NotFound-lU_E99L_.js","assets/NotFound-BdiBA5ln.css"])))=>i.map(i=>d[i]);
import{ax as f,h as S,U as A,z as L,R as C,al as T,A as k,ay as P,az as O,au as w,aA as V}from"./vendor-DdeEpjzh.js";import{i as R}from"./element-DkRX-ly5.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function o(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(r){if(r.ep)return;r.ep=!0;const n=o(r);fetch(r.href,n)}})();const _=f("theme",{state:()=>({isDark:!1,mode:"auto",customColors:{},themeConfig:{transitionDuration:"0.3s",transitionTimingFunction:"ease"}}),getters:{currentTheme:e=>e.isDark?"dark":"light",getCssVars:()=>{const e={},t=window.getComputedStyle(document.documentElement);return Array.from(t).forEach(o=>{o.startsWith("--")&&(e[o]=t.getPropertyValue(o).trim())}),e}},actions:{initTheme(){const e=localStorage.getItem("themeMode"),t=window.matchMedia("(prefers-color-scheme: dark)").matches;this.mode=e==="light"||e==="dark"?e:"auto";const o=this.mode==="auto"?t:this.mode==="dark";this.applyTheme(o),this.applySavedColors(),this.setupMediaQueryListener()},applyTheme(e){this.isDark=e,e?document.documentElement.setAttribute("data-theme","dark"):document.documentElement.setAttribute("data-theme","light"),this.mode!=="auto"&&localStorage.setItem("themeMode",e?"dark":"light"),window.dispatchEvent(new CustomEvent("themeChanged",{detail:{isDark:e}}))},toggleTheme(){this.mode=this.isDark?"light":"dark",localStorage.setItem("themeMode",this.mode),this.applyTheme(this.mode==="dark")},setupMediaQueryListener(){const e=window.matchMedia("(prefers-color-scheme: dark)"),t=o=>{this.mode==="auto"&&this.applyTheme(o.matches)};e.addEventListener("change",t),this._mediaQueryListener=t},updateConfig(e){this.themeConfig={...this.themeConfig,...e}},setCssVariable(e,t){document.documentElement.style.setProperty(e,t)},resetTheme(){localStorage.removeItem("theme"),localStorage.removeItem("themeMode"),localStorage.removeItem("themeColors"),this.customColors={},Object.keys(this.getCssVars()).forEach(t=>{document.documentElement.style.getPropertyValue(t)&&document.documentElement.style.setProperty(t,"")});const e=window.matchMedia("(prefers-color-scheme: dark)").matches;this.mode="auto",this.applyTheme(e)},setMode(e){this.mode=e,localStorage.setItem("themeMode",e);const t=window.matchMedia("(prefers-color-scheme: dark)").matches,o=e==="auto"?t:e==="dark";this.applyTheme(o)},setThemeColors(e){this.customColors={...this.customColors,...e},Object.entries(e).forEach(([t,o])=>{this.setCssVariable(t,o)}),localStorage.setItem("themeColors",JSON.stringify(this.customColors))},clearCustomColors(){Object.keys(this.customColors).forEach(e=>{document.documentElement.style.setProperty(e,"")}),this.customColors={},localStorage.removeItem("themeColors")},applySavedColors(){try{const e=localStorage.getItem("themeColors");if(e){const t=JSON.parse(e);this.customColors=t,Object.entries(t).forEach(([o,i])=>{this.setCssVariable(o,i)})}}catch{}},$dispose(){this._mediaQueryListener&&window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",this._mediaQueryListener)}}});window.toggleTheme||(window.toggleTheme=()=>{_().toggleTheme()});const D="auto",M={"--primary-color":"#4CAF50"},d={mode:D,colors:M};function b(){const e=_();e.initTheme(),!localStorage.getItem("themeMode")&&d.mode&&e.setMode(d.mode),!localStorage.getItem("themeColors")&&d.colors&&e.setThemeColors(d.colors)}const U={class:"app-container"},N={__name:"App",setup(e){let t;return S(()=>{b()}),A(()=>{try{t=_(),t&&t.$dispose&&t.$dispose()}catch{}}),(o,i)=>{const r=T("router-view");return k(),L("div",U,[C(r)])}}},q="modulepreload",Q=function(e){return"/"+e},g={},s=function(t,o,i){let r=Promise.resolve();if(o&&o.length>0){let I=function(m){return Promise.all(m.map(u=>Promise.resolve(u).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=a?.nonce||a?.getAttribute("nonce");r=I(o.map(m=>{if(m=Q(m),m in g)return;g[m]=!0;const u=m.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${h}`))return;const l=document.createElement("link");if(l.rel=u?"stylesheet":q,u||(l.as="script"),l.crossOrigin="",l.href=m,c&&l.setAttribute("nonce",c),document.head.appendChild(l),u)return new Promise((y,v)=>{l.addEventListener("load",y),l.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${m}`)))})}))}function n(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return r.then(a=>{for(const c of a||[])c.status==="rejected"&&n(c.reason);return t().catch(n)})},$=f("user",{state:()=>{const e=localStorage.getItem("token")||"";return console.log("Store初始化 - 从localStorage读取token:",e?"存在":"不存在"),{userInfo:null,token:e,role:localStorage.getItem("role")||"",isLoggedIn:!!e}},actions:{login(e){console.log("Store登录方法调用 - 接收到的用户数据:",e),this.userInfo={id:e.id,name:e.name,username:e.username},this.token=e.token,console.log("Store中设置token:",e.token),this.role=e.role===0?"admin":"user",this.isLoggedIn=!0,console.log("Store状态更新完成 - isLoggedIn:",this.isLoggedIn,"role:",this.role),localStorage.setItem("token",e.token),console.log("Store中token已存储到localStorage"),localStorage.setItem("role",this.role),localStorage.setItem("userInfo",JSON.stringify(this.userInfo))},logout(){this.userInfo=null,this.token="",this.role="",this.isLoggedIn=!1,localStorage.removeItem("token"),localStorage.removeItem("role"),localStorage.removeItem("userInfo")},restoreUser(){const e=localStorage.getItem("token"),t=localStorage.getItem("role"),o=localStorage.getItem("userInfo");e&&t&&o&&(this.token=e,this.role=t,this.userInfo=JSON.parse(o),this.isLoggedIn=!0)}},getters:{getUserName:e=>e.userInfo?.name||"用户",isAdmin:e=>e.role==="admin",isUser:e=>e.role==="user"}}),j=[{path:"/login",name:"Login",component:()=>s(()=>import("./Login-DZkOI0G3.js"),__vite__mapDeps([0,1,2,3,4,5])),meta:{requiresAuth:!1}},{path:"/register",name:"Register",component:()=>s(()=>import("./Register-sFqEDnyR.js"),__vite__mapDeps([6,1,2,3,4,7])),meta:{requiresAuth:!1}},{path:"/admin",name:"AdminLayout",component:()=>s(()=>import("./AdminLayout-D1ALm_c1.js"),__vite__mapDeps([8,1,9,4,10,3,11])),meta:{requiresAuth:!0,role:"admin"},children:[{path:"home",name:"AdminHome",component:()=>s(()=>import("./AdminHome-DlDE1u9U.js"),__vite__mapDeps([12,3,1,2,13,4,14]))},{path:"users",name:"UserManagement",component:()=>s(()=>import("./UserManagement-D-73LNuD.js"),__vite__mapDeps([15,2,3,1,4,16]))},{path:"employees",name:"EmployeeManagement",component:()=>s(()=>import("./EmployeeManagement-DOsGy_b8.js"),__vite__mapDeps([17,2,3,1,4,18]))},{path:"departments",name:"DepartmentManagement",component:()=>s(()=>import("./DepartmentManagement-DakWweW9.js"),__vite__mapDeps([19,1,2,3,4,20]))},{path:"services",name:"ServiceManagement",component:()=>s(()=>import("./ServiceManagement-B-mdHhpz.js"),__vite__mapDeps([21,2,3,1,4,22]))},{path:"ai-records",name:"AIRecords",component:()=>s(()=>import("./AIRecords-B0fw6GAT.js"),__vite__mapDeps([23,2,3,1,4,24]))},{path:"system",name:"SystemSettings",component:()=>s(()=>import("./SystemSettings-DWghzkMC.js"),__vite__mapDeps([25,2,3,1,4,26]))}]},{path:"/user",name:"UserLayout",component:()=>s(()=>import("./UserLayout-DMzXewrO.js"),__vite__mapDeps([27,1,9,4,10,3,28])),meta:{requiresAuth:!0,role:"user"},children:[{path:"home",name:"UserHome",component:()=>s(()=>import("./UserHome-DtSa8zFN.js"),__vite__mapDeps([29,1,3,2,4,30]))},{path:"ai-consult",name:"AIConsult",component:()=>s(()=>import("./AIConsult-CaxPc8jB.js"),__vite__mapDeps([31,1,3,2,4,32]))},{path:"health-record",name:"HealthRecord",component:()=>s(()=>import("./HealthRecord-yzzaX521.js"),__vite__mapDeps([33,1,4,34]))},{path:"service-appointment",name:"ServiceAppointment",component:()=>s(()=>import("./ServiceAppointment-0UBp7eNg.js"),__vite__mapDeps([35,1,4,3,36]))},{path:"mall",name:"MallHome",component:()=>s(()=>import("./MallHome-B3DPqLtX.js"),__vite__mapDeps([37,1,3,4,38]))},{path:"mall/product/:productId",name:"ProductDetail",component:()=>s(()=>import("./ProductDetail-D_CPmRQx.js"),__vite__mapDeps([39,1,3,4,40]))},{path:"mall/cart",name:"ShoppingCart",component:()=>s(()=>import("./ShoppingCart-B4-YzsQN.js"),__vite__mapDeps([41,1,4,3,42]))},{path:"mall/checkout",name:"Checkout",component:()=>s(()=>import("./Checkout-mcsjBxEI.js"),__vite__mapDeps([43,1,3,4,44]))}]},{path:"/",redirect:"/login"},{path:"/:pathMatch(.*)*",name:"NotFound",component:()=>s(()=>import("./NotFound-lU_E99L_.js"),__vite__mapDeps([45,1,4,46]))}],E=P({history:O(),routes:j});E.beforeEach((e,t,o)=>{const i=$();if(e.meta.requiresAuth){if(!i.isLoggedIn){console.log("路由守卫: 需要登录但未登录，重定向到登录页"),o("/login");return}if(e.meta.role&&e.meta.role!==i.role){console.log(`路由守卫: 角色权限不足 - 当前角色: ${i.role}, 需要角色: ${e.meta.role}`),i.isAdmin?o("/admin/home"):o("/user/home");return}}o()});const p=w(N);p.use(V());p.use(E);p.use(R);p.mount("#app");export{_ as a,$ as u};
